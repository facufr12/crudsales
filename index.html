<!DOCTYPE html>
<html lang="en">
  <!-- Mirrored from geeksui.codescandy.com/geeks/pages/sign-in.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 04 Dec 2023 18:26:00 GMT -->

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="Codescandy" />
    <script src="https://cdn.jsdelivr.net/npm/initials-avatar"></script>
    <script src="https://cdn.jsdelivr.net/npm/avataaars-generator@1.0.3/dist/avataaars-generator.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/initials-avatar@1.0.0/dist/initials-avatar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/avatar-generator@1.1.1/dist/avatar-generator.min.js"></script>
    <!-- Estilos Facundo -->
    <link rel="stylesheet" href="./geeks/assets/css/facundocss.css" />
    <!-- Favicon icon-->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="  assets/images/favicon.ico"
    />

    <!-- darkmode js -->
    <script src="  assets/js/vendors/darkMode.js"></script>

    <!-- Libs CSS -->
    <link href="  assets/fonts/feather/feather.css" rel="stylesheet" />
    <link
      href="  assets/libs/bootstrap-icons/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link
      href="  assets/libs/simplebar/dist/simplebar.min.css"
      rel="stylesheet"
    />

    <!-- Theme CSS -->
    <link rel="stylesheet" href="  assets/css/theme.min.css" />

    <link rel="canonical" href="sign-in.html" />
    <title>Cober - Medicina Privada</title>
  </head>

  <body>
    <!-- Page content -->
    <main>
      <section class="container d-flex flex-column vh-100">
        <div
          class="row align-items-center justify-content-center g-0 h-lg-100 py-8"
        >
          <div class="col-lg-5 col-md-8 py-8 py-xl-0">
            <!-- Card -->
            <div class="card shadow">
              <!-- Card body -->
              <div class="card-body p-6">
                <div class="mb-4">
                  <div class="d-flex justify-content-center">
                    <a href="index.html"
                      ><img
                        src="assets/images/logo-cober-ale.svg"
                        class="mb-4"
                        alt="logo-icon"
                        width="150px"
                    /></a>
                  </div>
                  <div class="d-flex justify-content-center">
                    <div class="flex-column">
                      <h1 class="mb-1 fw-bold">Inicio de Sesión</h1>
                      <span>
                        ¿No tenes acceso?
                        <a href="sign-up.html" class="ms-1">Registrarse</a>
                      </span>
                    </div>
                  </div>
                </div>
                <!-- Form -->
                <form class="needs-validation" novalidate>
                  <!-- Username -->
                  <div class="mb-4">
                    <label for="username" class="form-label">Usuario</label>
                    <input
                      type="text"
                      id="username"
                      class="form-control"
                      name="username"
                      placeholder="Nombre de Usuario"
                      required
                    />
                    <div class="invalid-feedback">
                      Por favor, ingrese un usuario válido.
                    </div>
                  </div>
                  <!-- Password -->
                  <div class="mb-3">
                    <label for="password" class="form-label">Contraseña</label>
                    <input
                      type="password"
                      id="password"
                      class="form-control"
                      name="password"
                      placeholder="**************"
                      required
                    />
                    <div class="invalid-feedback">
                      Por favor, ingrese una contraseña valida.
                    </div>
                  </div>
                  <!-- Checkbox -->
                  <div
                    class="d-lg-flex justify-content-between align-items-center mb-4"
                  >
                    <div class="form-check">
                      <input
                        type="checkbox"
                        class="form-check-input"
                        id="rememberme"
                        required
                      />
                      <label class="form-check-label" for="rememberme"
                        >Recuérdame</label
                      >
                      <div class="invalid-feedback"></div>
                    </div>
                    <div>
                      <a href="forget-password.html"
                        >¿Olvidaste tu contraseña?</a
                      >
                    </div>
                  </div>
                  <div>
                    <!--< Button -->
                    <div class="d-grid">
                      <button
                        type="submit"
                        id="submit"
                        class="btn btn-primary"
                      >
                        Iniciar Sesión
                      </button>
                      <div id="response" class="mt-3"></div>
                    </a>
                    </div>
                  </div>
                  <hr class="my-4" />
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>
      <div class="position-absolute bottom-0 m-4">
        <div class="dropdown">
          <button
            class="btn btn-light btn-icon rounded-circle d-flex align-items-end"
            type="button"
            aria-expanded="false"
            data-bs-toggle="dropdown"
            aria-label="Toggle theme (auto)"
          >
            <i class="bi theme-icon-active"></i>
            <span class="visually-hidden bs-theme-text">Toggle theme</span>
          </button>
          <ul
            class="dropdown-menu dropdown-menu-end shadow"
            aria-labelledby="bs-theme-text"
          >
            <li>
              <button
                type="button"
                class="dropdown-item d-flex align-items-center"
                data-bs-theme-value="light"
                aria-pressed="false"
              >
                <i class="bi theme-icon bi-sun-fill"></i>
                <span class="ms-2">Light</span>
              </button>
            </li>
            <li>
              <button
                type="button"
                class="dropdown-item d-flex align-items-center"
                data-bs-theme-value="dark"
                aria-pressed="false"
              >
                <i class="bi theme-icon bi-moon-stars-fill"></i>
                <span class="ms-2">Dark</span>
              </button>
            </li>
            <li>
              <button
                type="button"
                class="dropdown-item d-flex align-items-center active"
                data-bs-theme-value="auto"
                aria-pressed="true"
              >
                <i class="bi theme-icon bi-circle-half"></i>
                <span class="ms-2">Auto</span>
              </button>
            </li>
          </ul>
        </div>
      </div>
    </main>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        function getInitials(name, username) {
            const nameParts = name.split(' ');
            const initialsFromName = nameParts.length > 1 
                ? nameParts[0][0] + nameParts[nameParts.length - 1][0] 
                : nameParts[0][0];
            
            const initialsFromUsername = username[0];
            
            return (initialsFromName + initialsFromUsername).toUpperCase();
        }
    
        function createAvatar(initials) {
            const avatar = document.createElement('div');
            avatar.className = 'avatar';
            avatar.textContent = initials;
    
            // Estilo básico para el avatar
            avatar.style.width = '40px';
            avatar.style.height = '40px';
            avatar.style.borderRadius = '50%';
            avatar.style.backgroundColor = '#007bff'; // Color de fondo
            avatar.style.color = '#fff'; // Color del texto
            avatar.style.display = 'flex';
            avatar.style.alignItems = 'center';
            avatar.style.justifyContent = 'center';
            avatar.style.fontSize = '16px';
            avatar.style.fontWeight = 'bold';
            avatar.style.textTransform = 'uppercase';
    
            return avatar;
        }
    
        const form = document.querySelector("form.needs-validation");
        const responseDiv = document.getElementById("response");
        const navAvatarContainer = document.getElementById("nav-avatar"); // Contenedor del avatar en la barra de navegación
    
        const handleResponse = async (response) => {
            if (!response.ok) {
                throw new Error(`Error en la respuesta de la red: ${response.statusText}`);
            }
            const data = await response.json();
            console.log("Datos parseados de la respuesta:", data); // Muestra los datos aquí
            return data;
        };
    
        form.addEventListener("submit", async (event) => {
            event.preventDefault(); // Prevenir el envío del formulario de manera predeterminada
    
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
    
            const loginData = {
                username: username,
                password: password
            };
    
            try {
                const response = await fetch('https://pvjhxvdg-8080.brs.devtunnels.ms/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(loginData),
                    credentials: 'include'
                });
    
                const data = await handleResponse(response);
    
                const initials = getInitials(data.name, data.username);
                localStorage.setItem('userInitials', initials); // Guarda las iniciales en localStorage
    
                localStorage.setItem('authToken', data.token || ''); // Guarda el token si existe
                localStorage.setItem('userData', JSON.stringify(data)); // Guarda todos los datos del usuario
    
                setTimeout(() => {
                    window.location.href = '/secciones/admin-students.html';
                }, 5000);
    
                const cookies = document.cookie;
                console.log(`Cookies: ${cookies}`);
                responseDiv.textContent = `Cookies: ${cookies}`;
    
            } catch (error) {
                console.error("Error en el envío de datos:", error);
                responseDiv.textContent = `Error: ${error.message}`;
            }
        });
    });
    
      </script>
      
      
      
    <!-- Scripts -->
    <!-- Libs JS -->
    <script src="  assets/libs/%40popperjs/core/dist/umd/popper.min.js"></script>
    <script src="  assets/libs/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="  assets/libs/simplebar/dist/simplebar.min.js"></script>
    <script src="/fetchexcel.js"></script>
    <!-- Theme JS -->

    <script src="  assets/js/theme.min.js"></script>

    <script src="  assets/js/vendors/validation.js"></script>
  </body>

  <!-- Mirrored from geeksui.codescandy.com/geeks/pages/sign-in.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 04 Dec 2023 18:26:00 GMT -->
</html>
